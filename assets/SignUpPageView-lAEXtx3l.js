import{r,c as u,a as e,w as m,v as c,b as v,d as g,e as h,t as w,f as C,g as b,h as k,o as d,i as y}from"./index-pKOWNh4-.js";const x={id:"signUpPage",class:"bg-yellow"},U={class:"conatiner signUpPage vhContainer"},V=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),P={class:"formControls",action:"index.html"},E=e("h2",{class:"formControls_txt"},"註冊帳號",-1),q=e("label",{class:"formControls_label",for:"email"},"Email",-1),L={key:0},N=e("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),A={key:1},B=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),D={key:2},M=e("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1),R={key:3},S=["textContent"],I="https://todolist-api.hexschool.io/",j={__name:"SignUpPageView",setup(T){const _=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=r({email:"",password:"",nickname:""}),l=r(!1),n=r(""),p=r(""),f=()=>{const i=r(!0);n.value="",l.value=!1,Object.values(s.value).every(o=>o!=="")||(i.value=!1,l.value=!0),s.value.email!==""&&!_.test(s.value.email)&&(i.value=!1,n.value="E-mail格式錯誤",alert("E-mail格式錯誤")),p.value.includes(s.value.password)||(i.value=!1,n.value="您輸入的密碼不正確",alert("您輸入的密碼不正確")),i.value&&C.post(`${I}users/sign_up`,s.value).then(o=>{o.data.status&&(alert("註冊成功!"),b.push("/"))}).catch(o=>{var a;((a=o.response)==null?void 0:a.data)!=""&&(n.value="註冊失敗:"+o.response.data.message,alert(o.response.data.message))})};return(i,t)=>{const o=k("RouterLink");return d(),u("div",x,[e("div",U,[V,e("div",null,[e("form",P,[E,q,m(e("input",{class:"formControls_input",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.email=a),id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[c,s.value.email]]),l.value&&s.value.email==""?(d(),u("span",L,"此欄位不可留空")):v("",!0),N,m(e("input",{class:"formControls_input",type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.nickname=a),name:"name",id:"name",placeholder:"請輸入您的暱稱"},null,512),[[c,s.value.nickname]]),l.value&&s.value.nickname==""?(d(),u("span",A,"此欄位不可留空")):v("",!0),B,m(e("input",{class:"formControls_input",type:"password","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.password=a),name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[c,s.value.password]]),l.value&&s.value.password==""?(d(),u("span",D,"此欄位不可留空")):v("",!0),M,m(e("input",{class:"formControls_input",type:"password","onUpdate:modelValue":t[3]||(t[3]=a=>p.value=a),name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:""},null,512),[[c,p.value]]),l.value&&p.value==""?(d(),u("span",R,"此欄位不可留空")):v("",!0),e("input",{class:"formControls_btnSubmit",type:"button",onClick:f,value:"註冊帳號"}),g(o,{to:"/",class:"formControls_btnLink"},{default:h(()=>[y("登入")]),_:1}),e("span",{class:"errorMsg",textContent:w(n.value)},null,8,S)])])])])}}};export{j as default};
